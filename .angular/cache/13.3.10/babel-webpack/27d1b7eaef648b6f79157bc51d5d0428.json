{"ast":null,"code":"import { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { OrdemCompraService } from '../services/ordem-compra.service'; // Models\n\nimport { Pedido } from '../shared/pedido.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/ordem-compra.service\";\nimport * as i2 from \"../services/carinho.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../ordem-compra-sucesso/ordem-compra-sucesso.component\";\n\nfunction OrdemCompraComponent_div_1_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 23);\n    i0.ɵɵelement(2, \"img\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 25);\n    i0.ɵɵtext(4);\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\")(8, \"div\", 26)(9, \"div\", 27)(10, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function OrdemCompraComponent_div_1_div_5_div_1_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const item_r12 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(3);\n      return ctx_r13.diminuir(item_r12);\n    });\n    i0.ɵɵtext(11, \"-\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementStart(13, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function OrdemCompraComponent_div_1_div_5_div_1_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const item_r12 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext(3);\n      return ctx_r15.adicionar(item_r12);\n    });\n    i0.ɵɵtext(14, \"+\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(15, \"div\", 29);\n    i0.ɵɵtext(16);\n    i0.ɵɵpipe(17, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r12 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", item_r12.img.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r12.titulo, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r12.descricao_oferta, \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", item_r12.quantidade, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(17, 5, item_r12.quantidade * item_r12.valor, \"BRL\"), \" \");\n  }\n}\n\nfunction OrdemCompraComponent_div_1_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, OrdemCompraComponent_div_1_div_5_div_1_Template, 18, 8, \"div\", 21);\n    i0.ɵɵelementStart(2, \"div\", 6)(3, \"div\", 22)(4, \"h4\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"currency\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.itensCarrinho);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Total do pedido: \", i0.ɵɵpipeBind2(6, 2, ctx_r2.carrinhoService.totalCarrinhoCompras(), \"BRL\"), \"\");\n  }\n}\n\nfunction OrdemCompraComponent_div_1_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1, \" Seu carrinho est\\u00E1 vazio! N\\u00E3o perca tempo, aproveite as ofertas. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrdemCompraComponent_div_1_small_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 31);\n    i0.ɵɵtext(1, \"Ok\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrdemCompraComponent_div_1_small_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 32);\n    i0.ɵɵtext(1, \"Endere\\u00E7o inv\\u00E1lido\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrdemCompraComponent_div_1_small_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 31);\n    i0.ɵɵtext(1, \"Ok\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrdemCompraComponent_div_1_small_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 32);\n    i0.ɵɵtext(1, \"N\\u00FAmero inv\\u00E1lido\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrdemCompraComponent_div_1_small_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 31);\n    i0.ɵɵtext(1, \"Ok\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrdemCompraComponent_div_1_small_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 32);\n    i0.ɵɵtext(1, \"Forma de pagamento inv\\u00E1lida\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrdemCompraComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"form\", 3);\n    i0.ɵɵlistener(\"ngSubmit\", function OrdemCompraComponent_div_1_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.confirmarCompra();\n    });\n    i0.ɵɵelementStart(2, \"h5\");\n    i0.ɵɵtext(3, \"Sua Compra\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"hr\");\n    i0.ɵɵtemplate(5, OrdemCompraComponent_div_1_div_5_Template, 7, 5, \"div\", 4);\n    i0.ɵɵtemplate(6, OrdemCompraComponent_div_1_ng_template_6_Template, 2, 0, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"h5\");\n    i0.ɵɵtext(10, \"Dados de entrega\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"hr\");\n    i0.ɵɵelementStart(12, \"div\", 6)(13, \"div\", 7);\n    i0.ɵɵelement(14, \"input\", 8);\n    i0.ɵɵtemplate(15, OrdemCompraComponent_div_1_small_15_Template, 2, 0, \"small\", 9);\n    i0.ɵɵtemplate(16, OrdemCompraComponent_div_1_small_16_Template, 2, 0, \"small\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 11);\n    i0.ɵɵelement(18, \"input\", 12);\n    i0.ɵɵtemplate(19, OrdemCompraComponent_div_1_small_19_Template, 2, 0, \"small\", 9);\n    i0.ɵɵtemplate(20, OrdemCompraComponent_div_1_small_20_Template, 2, 0, \"small\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 13);\n    i0.ɵɵelement(22, \"input\", 14);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(23, \"br\");\n    i0.ɵɵelementStart(24, \"h5\");\n    i0.ɵɵtext(25, \"Dados de pagamento\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(26, \"hr\");\n    i0.ɵɵelementStart(27, \"div\", 6)(28, \"div\", 15)(29, \"select\", 16)(30, \"option\", 17);\n    i0.ɵɵtext(31, \"Selecione uma op\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"option\", 18);\n    i0.ɵɵtext(33, \"Dinheiro\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"option\", 19);\n    i0.ɵɵtext(35, \"D\\u00E9bito\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(36, OrdemCompraComponent_div_1_small_36_Template, 2, 0, \"small\", 9);\n    i0.ɵɵtemplate(37, OrdemCompraComponent_div_1_small_37_Template, 2, 0, \"small\", 10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(38, \"hr\");\n    i0.ɵɵelementStart(39, \"button\", 20);\n    i0.ɵɵtext(40, \"Cofirmar compra\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const _r3 = i0.ɵɵreference(7);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.formulario);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.carrinhoService.exibirItens().length)(\"ngIfElse\", _r3);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.formulario.get(\"endereco\").valid && ctx_r0.formulario.get(\"endereco\").touched);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.formulario.get(\"endereco\").invalid && ctx_r0.formulario.get(\"endereco\").touched);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.formulario.get(\"numero\").valid && ctx_r0.formulario.get(\"numero\").touched);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.formulario.get(\"numero\").invalid && ctx_r0.formulario.get(\"numero\").touched);\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.formulario.get(\"formaPagamento\").valid && ctx_r0.formulario.get(\"formaPagamento\").touched);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.formulario.get(\"formaPagamento\").invalid && ctx_r0.formulario.get(\"formaPagamento\").touched);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.formulario.valid);\n  }\n}\n\nfunction OrdemCompraComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelement(1, \"app-ordem-compra-sucesso\", 33);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"idPedidoCompra\", ctx_r1.idPedidoCompra);\n  }\n}\n\nexport let OrdemCompraComponent = /*#__PURE__*/(() => {\n  class OrdemCompraComponent {\n    constructor(ordemCompraService, carrinhoService) {\n      this.ordemCompraService = ordemCompraService;\n      this.carrinhoService = carrinhoService;\n      this.idPedidoCompra = undefined;\n      this.itensCarrinho = [];\n      this.formulario = new FormGroup({\n        'endereco': new FormControl(null, [Validators.required, Validators.minLength(3), Validators.maxLength(120)]),\n        'numero': new FormControl(null, [Validators.required, Validators.minLength(1), Validators.maxLength(10)]),\n        'complemento': new FormControl(null),\n        'formaPagamento': new FormControl(null, [Validators.required])\n      });\n    }\n\n    ngOnInit() {\n      this.itensCarrinho = this.carrinhoService.exibirItens();\n    }\n\n    confirmarCompra() {\n      let pedido = new Pedido(undefined, this.formulario.value.endereco, this.formulario.value.numero, this.formulario.value.complemento, this.formulario.value.formaPagamento, this.carrinhoService.exibirItens());\n\n      if (this.carrinhoService.exibirItens().length === 0) {\n        alert('Você não selecionou nenhum item!');\n      } else {\n        this.ordemCompraService.efetivarCompra(pedido).subscribe(idPedido => {\n          this.idPedidoCompra = idPedido;\n          this.carrinhoService.limparCarrinho();\n        });\n      }\n    }\n\n    adicionar(item) {\n      this.carrinhoService.adicionarQuantidade(item);\n    }\n\n    diminuir(item) {\n      this.carrinhoService.diminuiQuantidade(item);\n    }\n\n  }\n\n  OrdemCompraComponent.ɵfac = function OrdemCompraComponent_Factory(t) {\n    return new (t || OrdemCompraComponent)(i0.ɵɵdirectiveInject(i1.OrdemCompraService), i0.ɵɵdirectiveInject(i2.CarrinhoService));\n  };\n\n  OrdemCompraComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrdemCompraComponent,\n    selectors: [[\"app-ordem-compra\"]],\n    features: [i0.ɵɵProvidersFeature([OrdemCompraService])],\n    decls: 3,\n    vars: 2,\n    consts: [[1, \"container\"], [\"class\", \"ordem-compra\", 4, \"ngIf\"], [1, \"ordem-compra\"], [\"novalidate\", \"\", 3, \"formGroup\", \"ngSubmit\"], [4, \"ngIf\", \"ngIfElse\"], [\"carrinhoVazio\", \"\"], [1, \"form-row\"], [1, \"form-group\", \"col-md-6\"], [\"type\", \"text\", \"placeholder\", \"Endere\\u00E7o\", \"formControlName\", \"endereco\", 1, \"form-control\"], [\"class\", \"form-text text-success\", 4, \"ngIf\"], [\"class\", \"form-text text-danger\", 4, \"ngIf\"], [1, \"form-group\", \"col-md-2\"], [\"type\", \"text\", \"placeholder\", \"N\\u00FAmero\", \"formControlName\", \"numero\", 1, \"form-control\"], [1, \"form-group\", \"col-md-4\"], [\"type\", \"text\", \"placeholder\", \"Complemento\", \"formControlName\", \"complemento\", 1, \"form-control\"], [1, \"form-group\", \"col-md-3\"], [\"formControlName\", \"formaPagamento\", 1, \"form-control\"], [\"value\", \"\"], [\"value\", \"dinheiro\"], [\"value\", \"debito\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"disabled\"], [\"class\", \"form-row\", 4, \"ngFor\", \"ngForOf\"], [1, \"form-group\", \"col\", \"d-flex\", \"justify-content-end\"], [1, \"form-group\", \"col-sm-1\"], [1, \"img-fluid\", 3, \"src\"], [1, \"form-group\", \"col-sm-6\"], [1, \"row\"], [1, \"col\"], [\"type\", \"button\", 1, \"btn\", \"btn-link\", 3, \"click\"], [1, \"form-group\", \"col-sm-3\", \"d-flex\", \"justify-content-end\"], [1, \"form-row\", \"d-flex\", \"justify-content-center\", \"text-center\"], [1, \"form-text\", \"text-success\"], [1, \"form-text\", \"text-danger\"], [3, \"idPedidoCompra\"]],\n    template: function OrdemCompraComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, OrdemCompraComponent_div_1_Template, 41, 10, \"div\", 1);\n        i0.ɵɵtemplate(2, OrdemCompraComponent_div_2_Template, 2, 1, \"div\", 1);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.idPedidoCompra === undefined);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.idPedidoCompra !== undefined);\n      }\n    },\n    directives: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.FormGroupDirective, i3.NgForOf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlName, i4.SelectControlValueAccessor, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i5.OrdemCompraSucessoComponent],\n    pipes: [i3.CurrencyPipe],\n    styles: [\".ordem-compra[_ngcontent-%COMP%]{margin:50px 0 150px}input.ng-invalid.ng-touched[_ngcontent-%COMP%], select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}input.ng-valid.ng-touched[_ngcontent-%COMP%], select.ng-valid.ng-touched[_ngcontent-%COMP%]{border:1px solid green}.form-row[_ngcontent-%COMP%]{background:#FAFAFA;padding:20px;border-bottom:solid 1px #F0F0F0}\"]\n  });\n  return OrdemCompraComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}